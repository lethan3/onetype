I want to build a VS Code extension which allows users to create a LiveShare and enforce that only one person can edit files at a time. 
This can be done with the following code (but you do not have to do exactly this):

// Revert unauthorized edits and show a strong popup
    vscode.workspace.onDidChangeTextDocument(event => {
        if (hasEditLock()) return;

        const editor = vscode.window.activeTextEditor;
        if (!editor || editor.document !== event.document) return;

        // Show popup if enough time has passed
        const now = Date.now();
        if (now - lastEditErrorTime > ERROR_INTERVAL_MS) {
            lastEditErrorTime = now;

            // Use next tick to avoid suppression
            setTimeout(() => {
                vscode.window.showErrorMessage('‚ùå Edit denied. You do not hold the lock.', { modal: true });
            }, 0);
        }

        // Revert the edit
        vscode.commands.executeCommand('workbench.action.files.revert');
    });

I would like to create the extension.ts and package.json files necessary to do this. Please refer to the below implementation
details to create the files. Keep the comments if possible, but if rearrangement is necessary for functionality, do so. Also,
if the extension will not function if you do not add additional functionality, do so as well.

Please use the vsls Activity API for communication, as detailed below.

Session variables:
    * inSession = Boolean, currently in a session or not
    * host = Current host of the session
    * editor = Current editor of the session
    * users = List of usernames in the session
    * myUsername = My username
    * requests = Queue of usernames requesting edit

Necessary functions:

* OnActivity:
    * If type is join AND I am the host:
        * Assert that the username listed is not already present in users
        * Send an activity of type initiateJoin with the current host, current editor, list of usernames, and queue of usernames
    * If type is initiateJoin AND I am NOT the host:
        * Update my session variables with the ones in the activity
        * Set inSession to true
    * If type is transferAccess:
        * Update editor to whoever edit is being transferred to

* OnDocumentChange (or whatever it's called):
    * If inSession AND I am NOT the editor:
        * Revert the edit
        * Popup stating error

* Start a session (command name OneType: Host a Session)
    * Check not currently in session (otherwise popup with error)
    * Prompt for a username
    * Initialize session variables (in session, host = editor = me)
    * Create LiveShare of current folder
    * Popup with LiveShare link to copy and distribute

* Join a session (command name OneType: Join a Session)
    * Check not currently in session (otherwise popup with error)
    * Prompt for a LiveShare join link
    * Prompt for a username
    * Send a LiveShare postActivity event of a join with my username

* Give access (command name OneType: Give Edit Access)
    * Check currently in session and that I am the editor (otherwise popup with error)
    * Prompt me to choose a person to grant access to (give me the list of users to choose from)
    * Post activity of type transferAccess with values me then person I give access to